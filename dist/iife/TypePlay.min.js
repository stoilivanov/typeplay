var TypePlay=function(){"use strict";var a=Math.floor;class b{constructor(a=null,b={typeSpeed:{min:140,max:220},delSpeed:{min:50,max:90}}){if(null==a)throw new Error("When invoking a new instance of TypePlay you must specify a DOM element!");this.target=a,this.textNodeL=document.createElement("span"),this.textNodeR=document.createElement("span"),this.cursorContainerNode=document.createElement("span"),this.textNodeL.innerHTML=a.innerHTML,a.innerHTML="",a.appendChild(this.textNodeL),a.appendChild(this.cursorContainerNode),a.appendChild(this.textNodeR),this.insertCursor(),this.settings=b}insertCursor(){this.cursorNode=document.createElement("span"),this.cursorNode.classList.add("typePlayBlinker"),this.cursorNode.innerHTML="|",this.cursorContainerNode.appendChild(this.cursorNode)}refreshCursor(){this.cursorContainerNode.removeChild(this.cursorNode),this.insertCursor()}getRandomNumberBetween(b,c){return a(Math.random()*(c-b))+b}getNavigateSpeed(){return a(51*Math.random())+80}getTypeSpeed(){return"number"==typeof this.settings.typeSpeed?this.settings.typeSpeed:"object"==typeof this.settings.typeSpeed?this.getRandomNumberBetween(this.settings.typeSpeed.max,this.settings.typeSpeed.min):150}getDeletionSpeed(){return"number"==typeof this.settings.delSpeed?this.settings.delSpeed:"object"==typeof this.settings.delSpeed?this.getRandomNumberBetween(this.settings.delSpeed.max,this.settings.delSpeed.min):150}type({text:a,speed:b},c=1e3,d=null){return new Promise(b=>{this.textNodeL.innerHTML+=a[0],a=a.slice(1),this.refreshCursor(),null==d&&(d=b),0<a.length?setTimeout(()=>this.type({text:a},c,d),this.getTypeSpeed()):setTimeout(()=>d(),c)})}erase(a=1,b=1e3,c=null){return new Promise(d=>{let e=this.textNodeL.innerHTML;this.textNodeL.innerHTML=e.substring(0,e.length-1),this.refreshCursor(),a--,null==c&&(c=d),0<a?setTimeout(()=>this.erase(a,b,c),this.getDeletionSpeed()):setTimeout(()=>c(),b)})}eraseAll(a=1e3,b=null){return new Promise(c=>{let d=this.textNodeL.innerHTML;this.textNodeL.innerHTML=d.substring(0,d.length-1),this.refreshCursor(),null==b&&(b=c),0<d.length?setTimeout(()=>this.eraseAll(a,b),this.getDeletionSpeed()):setTimeout(()=>b(),a)})}wait({ms:a}){return new Promise(b=>setTimeout(b,a))}navigateLeft(a=1,b=null){return new Promise(c=>{let d=this.textNodeL.innerHTML;this.textNodeL.innerHTML=d.substr(0,d.length-1),this.textNodeR.innerHTML=d.substr(-1)+this.textNodeR.innerHTML,this.refreshCursor(),a--,null==b&&(b=c),0<a?setTimeout(()=>this.navigateLeft(a,b),this.getNavigateSpeed()):b()})}navigateRight(a=1,b=null){return new Promise(c=>{let d=this.textNodeR.innerHTML;this.textNodeL.innerHTML+=d[0],this.textNodeR.innerHTML=d.substr(1),this.refreshCursor(),a--,null==b&&(b=c),0<a?setTimeout(()=>this.navigateRight(a,b),this.getNavigateSpeed()):b()})}}return class{constructor(a,c={}){this.sequence=[],this.typer=new b(a,c)}wait(a){return this.sequence.push({action:"wait",params:{ms:a}}),this}type(a,b={speed:null}){return b.text=a,this.sequence.push({action:"type",params:b}),this}erase(a={chars:1,speed:null}){return this.sequence.push({action:"erase",params:a}),this}eraseAll(){return this.sequence.push({action:"eraseAll",params:{}}),this}repeat(){return this.sequence.push({action:"repeat",params:{}}),this}navigate(a,b={}){0<a?this.sequence.push({action:"navigateRight",params:b}):this.sequence.push({action:"navigateLeft",params:b})}async play(){for(let a=0;a<this.sequence.length;a++){let b=this.sequence[a],c=b.params;if("repeat"==b.action){a=-1;continue}else await this.typer[b.action](c)}}}}();
